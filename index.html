<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>æ‰“åœ°é¼ å°éŠæˆ²</title>

<style>
/* ===== åŸºæœ¬è¨­å®š ===== */
:root {
  --hole-size: 100px; /* æ´å£å¤§å° */
}

body {
  margin: 0;
  min-height: 100vh;
  text-align: center;
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(180deg, #f4f1ea, #dce9d5);
}

h1 {
  margin-top: 20px;
  color: #444;
}

/* åˆ†æ•¸èˆ‡æ™‚é–“ */
#info {
  font-size: 18px;
  margin-top: 8px;
}

/* ç‚¸å½ˆæé†’æ–‡å­— */
#warning {
  font-size: 15px;
  color: #7a2e2e;
  margin-bottom: 10px;
}

/* ===== éŠæˆ²å€ ===== */
#game {
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(3, var(--hole-size));
  gap: 14px;
  width: fit-content;
}

/* æ´å£ */
.hole {
  width: var(--hole-size);
  height: var(--hole-size);
  background: #8b6b4f;
  border-radius: 50%;
  position: relative;
  overflow: hidden;
}

/* å…±ç”¨ç‰©ä»¶ï¼ˆåœ°é¼  / ç‚¸å½ˆï¼‰ */
.item {
  position: absolute;
  left: 50%;
  bottom: -100px;              /* èº²åœ¨æ´ä¸‹ */
  transform: translateX(-50%);
  transition: bottom 0.3s ease;
  cursor: pointer;
}

/* æ´å£å•Ÿå‹•æ™‚å†’å‡ºä¾† */
.hole.active .item {
  bottom: 10px;
}

/* ===== åœ°é¼ æ¨£å¼ ===== */
.mole {
  width: 70px;
  height: 85px;
  background: #6a4a2e;
  border-radius: 35px 35px 28px 28px;
  position: relative;
}

/* åœ°é¼ çœ¼ç› */
.mole::before,
.mole::after {
  content: "";
  position: absolute;
  top: 22px;
  width: 8px;
  height: 8px;
  background: #000;
  border-radius: 50%;
}

.mole::before { left: 18px; }
.mole::after  { right: 18px; }

/* åœ°é¼ å˜´å·´ */
.mole span {
  position: absolute;
  bottom: 18px;
  left: 50%;
  width: 18px;
  height: 10px;
  border-bottom: 3px solid #000;
  border-radius: 0 0 12px 12px;
  transform: translateX(-50%);
}

/* ===== ç‚¸å½ˆæ¨£å¼ ===== */
.bomb {
  width: 70px;
  height: 70px;
  background: #333;
  border-radius: 50%;
  color: #fff;
  font-size: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* é–‹å§‹æŒ‰éˆ• */
button {
  padding: 8px 20px;
  font-size: 16px;
  border-radius: 20px;
  border: none;
  background: #6c8f6c;
  color: #fff;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>ğŸ¹ æ‰“åœ°é¼ </h1>

<div id="info">åˆ†æ•¸ï¼š0 ï½œ å‰©é¤˜æ™‚é–“ï¼š30 ç§’</div>
<div id="warning">âš ï¸ æé†’ï¼šé»åˆ° ğŸ’£ ç‚¸å½ˆ æœƒæ‰£ 2 åˆ†</div>
<button id="startBtn">é–‹å§‹éŠæˆ²</button>

<!-- ä¹å®®æ ¼æ´å£ -->
<div id="game">
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
  <div class="hole"><div class="item"></div></div>
</div>

<script>
/* ===== å–å¾—å…ƒç´  ===== */
const holes = document.querySelectorAll(".hole");
const info = document.getElementById("info");
const startBtn = document.getElementById("startBtn");

/* ===== éŠæˆ²ç‹€æ…‹ ===== */
let score = 0;
let timeLeft = 30;
let activeHole = null;

let interval = 1200;       // åœ°é¼ å‡ºç¾é€Ÿåº¦ï¼ˆåˆå§‹ï¼‰
const minInterval = 550;  // æœ€å¿«é€Ÿåº¦

let moleTimer, gameTimer, speedTimer;

/* æ›´æ–°ç•«é¢è³‡è¨Š */
function updateInfo() {
  info.textContent = `åˆ†æ•¸ï¼š${score} ï½œ å‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
}

/* é»æ“Šäº‹ä»¶ï¼ˆåœ°é¼  / ç‚¸å½ˆï¼‰ */
holes.forEach(hole => {
  const item = hole.querySelector(".item");

  item.addEventListener("click", e => {
    e.stopPropagation();
    if (!hole.classList.contains("active")) return;

    if (item.classList.contains("bomb")) {
      score -= 2;
      if (score < 0) score = 0;
    } else {
      score += 1;
    }

    hole.classList.remove("active");
    updateInfo();
  });
});

/* é¡¯ç¤ºåœ°é¼ æˆ–ç‚¸å½ˆ */
function showItem() {
  if (activeHole) activeHole.classList.remove("active");

  const hole = holes[Math.floor(Math.random() * holes.length)];
  const item = hole.querySelector(".item");

  item.className = "item";
  item.innerHTML = "";

  if (Math.random() < 0.2) {
    item.classList.add("bomb");
    item.textContent = "ğŸ’£";
  } else {
    item.classList.add("mole");
    item.innerHTML = "<span></span>";
  }

  hole.classList.add("active");
  activeHole = hole;
}

/* é–‹å§‹éŠæˆ² */
function startGame() {
  score = 0;
  timeLeft = 30;
  interval = 1200;
  updateInfo();

  clearInterval(moleTimer);
  clearInterval(gameTimer);
  clearInterval(speedTimer);

  showItem();
  moleTimer = setInterval(showItem, interval);

  /* é€Ÿåº¦æ…¢æ…¢è®Šå¿« */
  speedTimer = setInterval(() => {
    if (interval > minInterval) {
      interval -= 100;
      clearInterval(moleTimer);
      moleTimer = setInterval(showItem, interval);
    }
  }, 5000);

  /* å€’æ•¸è¨ˆæ™‚ */
  gameTimer = setInterval(() => {
    timeLeft--;
    updateInfo();
    if (timeLeft <= 0) endGame();
  }, 1000);
}

/* éŠæˆ²çµæŸ */
function endGame() {
  clearInterval(moleTimer);
  clearInterval(gameTimer);
  clearInterval(speedTimer);
  if (activeHole) activeHole.classList.remove("active");
  alert(`ğŸ‰ éŠæˆ²çµæŸï¼ä½ çš„åˆ†æ•¸æ˜¯ï¼š${score}`);
}

startBtn.addEventListener("click", startGame);
</script>

</body>
</html>
